(function(M,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("vue"),require("@vueuse/core"),require("@vueuse/integrations/useFocusTrap")):typeof define=="function"&&define.amd?define(["exports","vue","@vueuse/core","@vueuse/integrations/useFocusTrap"],o):(M=typeof globalThis<"u"?globalThis:M||self,o(M.index={},M.Vue,M.VueUse,M.VueUseFocusTrap))})(this,function(M,o,B,fe){"use strict";const j={modalId:{type:[String,Number,Symbol],default:void 0},modelValue:{type:Boolean,default:void 0},displayDirective:{type:String,default:"if",validator:e=>["if","show"].includes(e)},hideOverlay:{type:Boolean,default:void 0},overlayTransition:{type:[String,Object],default:void 0},contentTransition:{type:[String,Object],default:void 0},overlayClass:{type:void 0,default:void 0},contentClass:{type:void 0,default:void 0},overlayStyle:{type:[String,Object,Array],default:void 0},contentStyle:{type:[String,Object,Array],default:void 0},clickToClose:{type:Boolean,default:!0},escToClose:{type:Boolean,default:!0},background:{type:String,default:"non-interactive",validator:e=>["interactive","non-interactive"].includes(e)},focusTrap:{type:[Boolean,Object],default:()=>({allowOutsideClick:!0})},lockScroll:{type:Boolean,default:!0},zIndexFn:{type:Function,default:({index:e})=>1e3+2*e},swipeToClose:{type:String,default:"none",validator:e=>["none","up","right","down","left"].includes(e)},threshold:{type:Number,default:0},showSwipeBanner:{type:Boolean,default:void 0},preventNavigationGestures:{type:Boolean,default:void 0}};function K(e=!1){const n=o.ref(e),t=o.ref(n.value?0:void 0);return[n,t,{beforeEnter(){t.value=1},afterEnter(){t.value=0},beforeLeave(){t.value=3},afterLeave(){t.value=2}}]}function pe(e,n){const{modelValueLocal:t,onEntering:s,onEnter:d,onLeaving:c,onLeave:r}=n,l=o.ref(t.value),[a,p,h]=K(l.value),[u,f,m]=K(l.value),O=o.computed(()=>typeof e.contentTransition=="string"?{name:e.contentTransition}:{...e.contentTransition}),V=o.computed(()=>typeof e.overlayTransition=="string"?{name:e.overlayTransition}:{...e.overlayTransition}),k=o.computed(()=>(e.hideOverlay||f.value===2)&&p.value===2);o.watch(k,I=>{I&&(l.value=!1)}),o.watch(p,I=>{switch(I){case 1:return s==null?void 0:s();case 0:return d==null?void 0:d();case 3:return c==null?void 0:c();case 2:return r==null?void 0:r()}});async function S(){l.value=!0,await o.nextTick(),a.value=!0,u.value=!0}function P(){a.value=!1,u.value=!1}return{visible:l,contentVisible:a,contentListeners:h,contentTransition:O,overlayVisible:u,overlayListeners:m,overlayTransition:V,enterTransition:S,leaveTransition:P}}function me(e,n,t){const{vfmRootEl:s,vfmContentEl:d,visible:c,modelValueLocal:r}=t,l=o.ref();function a(){c.value&&e.escToClose&&(r.value=!1)}function p(u){l.value=u==null?void 0:u.target}function h(){var u;l.value===s.value&&(e.clickToClose?r.value=!1:((u=d.value)==null||u.focus(),n("clickOutside")))}return{onEsc:a,onMouseupRoot:h,onMousedown:p}}function ve(e,n){const t=o.ref(!!e.modelValue);return o.watch(()=>e.modelValue,s=>{t.value=!!s}),o.watch(t,s=>{s!==e.modelValue&&n("update:modelValue",s)}),{modelValueLocal:t}}function ye(e,n){if(e.focusTrap===!1)return{focus(){},blur(){}};const{focusEl:t}=n,{hasFocus:s,activate:d,deactivate:c}=fe.useFocusTrap(t,e.focusTrap);function r(){requestAnimationFrame(()=>{d()})}function l(){s.value&&c()}return{focus:r,blur:l}}let G=!1;if(typeof window<"u"){const e={get passive(){G=!0}};window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}const _=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);let x=[],H=!1,z=0,J=-1,R,N;const he=e=>{if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const n=window.getComputedStyle(e);return["auto","scroll"].includes(n.overflowY)&&e.scrollHeight>e.clientHeight},we=(e,n)=>!(e.scrollTop===0&&n<0||e.scrollTop+e.clientHeight+n>=e.scrollHeight&&n>0),be=e=>{const n=[];for(;e;){if(n.push(e),e.classList.contains("vfm"))return n;e=e.parentElement}return n},Te=(e,n)=>{let t=!1;return be(e).forEach(d=>{he(d)&&we(d,n)&&(t=!0)}),t},Q=e=>x.some(()=>Te(e,-z)),U=e=>{const n=e||window.event;return Q(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},Me=e=>{if(N===void 0){const n=!!e&&e.reserveScrollBarGap===!0,t=window.innerWidth-document.documentElement.clientWidth;if(n&&t>0){const s=parseInt(getComputedStyle(document.body).getPropertyValue("padding-right"),10);N=document.body.style.paddingRight,document.body.style.paddingRight=`${s+t}px`}}R===void 0&&(R=document.body.style.overflow,document.body.style.overflow="hidden")},Se=()=>{N!==void 0&&(document.body.style.paddingRight=N,N=void 0),R!==void 0&&(document.body.style.overflow=R,R=void 0)},Ce=e=>e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1,Oe=(e,n)=>(z=e.targetTouches[0].clientY-J,Q(e.target)?!1:n&&n.scrollTop===0&&z>0||Ce(n)&&z<0?U(e):(e.stopPropagation(),!0)),ke=(e,n)=>{if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(x.some(s=>s.targetElement===e))return;const t={targetElement:e,options:n||{}};x=[...x,t],_?(e.ontouchstart=s=>{s.targetTouches.length===1&&(J=s.targetTouches[0].clientY)},e.ontouchmove=s=>{s.targetTouches.length===1&&Oe(s,e)},H||(document.addEventListener("touchmove",U,G?{passive:!1}:void 0),H=!0)):Me(n)},Ee=e=>{if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}x=x.filter(n=>n.targetElement!==e),_?(e.ontouchstart=null,e.ontouchmove=null,H&&x.length===0&&(document.removeEventListener("touchmove",U,G?{passive:!1}:void 0),H=!1)):x.length||Se()};function ge(e,n){const{lockScrollEl:t}=n;o.watch(()=>e.lockScroll,c=>{c?d():s()}),o.onBeforeUnmount(()=>{s()});function s(){t.value&&Ee(t.value)}function d(){e.lockScroll&&t.value&&ke(t.value,{reserveScrollBarGap:!0,allowTouchMove:c=>{for(;c&&c!==document.body;){if(c.getAttribute("vfm-scroll-lock-ignore")!==null)return!0;c=c.parentElement}return!1}})}return{enableBodyScroll:s,disableBodyScroll:d}}function Be(e){function n(t){switch(t){case"beforeOpen":e(t);break;case"beforeClose":e(t);break;case"opened":e(t);break;case"closed":e(t);break}}return{emitEvent:n}}function Ve(e){const n=o.ref();function t(d){var c;n.value=(c=e.zIndexFn)==null?void 0:c.call(e,{index:d<=-1?0:d})}function s(){n.value=void 0}return{zIndex:n,refreshZIndex:t,resetZIndex:s}}const Le=e=>(...n)=>{e&&(e==null||e(...n),e=null)},L=()=>{};function Y(e,n,t){return e>t?t:e<n?n:e}const ee=e=>{if(e instanceof MouseEvent){const{clientX:n,clientY:t}=e;return{x:n,y:t}}else{const{clientX:n,clientY:t}=e.targetTouches[0];return{x:n,y:t}}};function Pe(e){if(!e)return!1;let n=!1;const t={get passive(){return n=!0,!1}};return e.addEventListener("x",L,t),e.removeEventListener("x",L),n}function Ie(e,{threshold:n=0,onSwipeStart:t,onSwipe:s,onSwipeEnd:d,passive:c=!0}){const r=o.reactive({x:0,y:0}),l=o.reactive({x:0,y:0}),a=o.computed(()=>r.x-l.x),p=o.computed(()=>r.y-l.y),{max:h,abs:u}=Math,f=o.computed(()=>h(u(a.value),u(p.value))>=n),m=o.ref(!1),O=o.computed(()=>f.value?u(a.value)>u(p.value)?a.value>0?"left":"right":p.value>0?"up":"down":"none"),V=(v,w)=>{r.x=v,r.y=w},k=(v,w)=>{l.x=v,l.y=w};let S,P;function I(v){S.capture&&!S.passive&&v.preventDefault();const{x:w,y:F}=ee(v);V(w,F),k(w,F),t==null||t(v),P=[B.useEventListener(e,"mousemove",E,S),B.useEventListener(e,"touchmove",E,S),B.useEventListener(e,"mouseup",i,S),B.useEventListener(e,"touchend",i,S),B.useEventListener(e,"touchcancel",i,S)]}function E(v){const{x:w,y:F}=ee(v);k(w,F),!m.value&&f.value&&(m.value=!0),m.value&&(s==null||s(v))}function i(v){m.value&&(d==null||d(v,O.value)),m.value=!1,P.forEach(w=>w())}let y=[];return o.onMounted(()=>{const v=Pe(window==null?void 0:window.document);c?S=v?{passive:!0}:{capture:!1}:S=v?{passive:!1,capture:!0}:{capture:!0},y=[B.useEventListener(e,"mousedown",I,S),B.useEventListener(e,"touchstart",I,S)]}),{isSwiping:m,direction:O,coordsStart:r,coordsEnd:l,lengthX:a,lengthY:p,stop:()=>{y.forEach(v=>v()),P.forEach(v=>v())}}}function De(e,n){const{vfmContentEl:t,modelValueLocal:s}=n,d=.1,c=300,r=o.ref(),l=o.computed(()=>{if(!(e.swipeToClose===void 0||e.swipeToClose==="none"))return e.showSwipeBanner?r.value:t.value}),a=o.ref(0),p=o.ref(!0);let h=L,u=!0,f,m=!1;const{lengthX:O,lengthY:V,direction:k,isSwiping:S}=Ie(l,{threshold:e.threshold,onSwipeStart(i){h=B.useEventListener(document,"selectionchange",()=>{var y;p.value=(y=window.getSelection())==null?void 0:y.isCollapsed}),f=new Date().getTime(),m=E(i==null?void 0:i.target)},onSwipe(){var i,y,g,v;if(m&&p.value&&k.value===e.swipeToClose){if(k.value==="up"){const w=Y(Math.abs(V.value||0),0,((i=l.value)==null?void 0:i.offsetHeight)||0)-(e.threshold||0);a.value=w}else if(k.value==="down"){const w=Y(Math.abs(V.value||0),0,((y=l.value)==null?void 0:y.offsetHeight)||0)-(e.threshold||0);a.value=-w}else if(k.value==="right"){const w=Y(Math.abs(O.value||0),0,((g=l.value)==null?void 0:g.offsetWidth)||0)-(e.threshold||0);a.value=-w}else if(k.value==="left"){const w=Y(Math.abs(O.value||0),0,((v=l.value)==null?void 0:v.offsetWidth)||0)-(e.threshold||0);a.value=w}}},onSwipeEnd(i,y){if(h(),!p.value){p.value=!0;return}const g=new Date().getTime(),v=y===e.swipeToClose,w=(()=>{var A,$;if(y==="up"||y==="down")return Math.abs((V==null?void 0:V.value)||0)>d*(((A=l.value)==null?void 0:A.offsetHeight)||0);if(y==="left"||y==="right")return Math.abs((O==null?void 0:O.value)||0)>d*((($=l.value)==null?void 0:$.offsetWidth)||0)})(),F=g-f<=c;if(u&&m&&v&&(w||F)){s.value=!1;return}a.value=0}}),P=o.computed(()=>{if(e.swipeToClose==="none")return;const i=(()=>{switch(e.swipeToClose){case"up":case"down":return"translateY";case"left":case"right":return"translateX"}})();return{class:{"vfm-bounce-back":!S.value},style:{transform:`${i}(${-a.value}px)`}}});o.watch(()=>p.value,i=>{i||(a.value=0)}),o.watch(()=>s.value,i=>{i&&(a.value=0)}),o.watch(()=>a.value,(i,y)=>{switch(e.swipeToClose){case"down":case"right":u=i<y;break;case"up":case"left":u=i>y;break}});function I(i){e.preventNavigationGestures&&i.preventDefault()}function E(i){const y=i==null?void 0:i.tagName;if(!y||["INPUT","TEXTAREA"].includes(y))return!1;const g=(()=>{switch(e.swipeToClose){case"up":return(i==null?void 0:i.scrollTop)+(i==null?void 0:i.clientHeight)===(i==null?void 0:i.scrollHeight);case"left":return(i==null?void 0:i.scrollLeft)+(i==null?void 0:i.clientWidth)===(i==null?void 0:i.scrollWidth);case"down":return(i==null?void 0:i.scrollTop)===0;case"right":return(i==null?void 0:i.scrollLeft)===0;default:return!1}})();return i===l.value?g:g&&E(i==null?void 0:i.parentElement)}return{vfmContentEl:t,swipeBannerEl:r,bindSwipe:P,onTouchStartSwipeBanner:I}}const W=Symbol("vfm"),X=Symbol("internalVfm"),oe=o.defineComponent({__name:"CoreModal",props:j,emits:["update:modelValue","beforeOpen","opened","beforeClose","closed","clickOutside"],setup(e,{emit:n}){const t=e,{modals:s,openedModals:d}=o.inject(W,{modals:[],openedModals:[]}),{openLastOverlay:c,moveToLastOpenedModals:r,deleteFromOpenedModals:l,moveToLastOpenedModalOverlays:a,deleteFromOpenedModalOverlays:p,deleteFromModals:h}=o.inject(X,{openLastOverlay:L,moveToLastOpenedModals:L,deleteFromOpenedModals:L,moveToLastOpenedModalOverlays:L,deleteFromOpenedModalOverlays:L,deleteFromModals:L}),u=o.ref(),f=o.ref(),{focus:m,blur:O}=ye(t,{focusEl:u}),{zIndex:V,refreshZIndex:k,resetZIndex:S}=Ve(t),{enableBodyScroll:P,disableBodyScroll:I}=ge(t,{lockScrollEl:u}),{modelValueLocal:E}=ve(t,n),{emitEvent:i}=Be(n);let y=L;const{visible:g,contentVisible:v,contentListeners:w,contentTransition:F,overlayVisible:A,overlayListeners:$,overlayTransition:Ge,enterTransition:We,leaveTransition:Xe}=pe(t,{modelValueLocal:E,onEnter(){m(),I(),i("opened"),y("opened")},onLeave(){l(Je()),S(),i("closed"),y("closed")}}),{onEsc:Ze,onMouseupRoot:qe,onMousedown:ie}=me(t,n,{vfmRootEl:u,vfmContentEl:f,visible:g,modelValueLocal:E}),{swipeBannerEl:Ke,bindSwipe:_e,onTouchStartSwipeBanner:ce}=De(t,{vfmContentEl:f,modelValueLocal:E}),de=o.toRef(t,"hideOverlay"),D=o.computed(()=>({modalId:t.modalId,hideOverlay:de,overlayVisible:A,focus:m,toggle(b){return new Promise(T=>{y=Le(eo=>T(eo));const C=typeof b=="boolean"?b:!E.value;E.value=C,n("update:modelValue",C)})}}));function Je(){return D}const q=o.computed(()=>d.indexOf(D));o.watch(()=>[t.zIndexFn,q.value],()=>{g.value&&k(q.value)}),o.onMounted(()=>{s.push(D)}),E.value&&ue(),o.watch(E,b=>{b?ue():Qe()});async function ue(){i("beforeOpen"),r(D),a(D),k(q.value),c(),We()}function Qe(){i("beforeClose"),P(),p(D),c(),O(),Xe()}return o.onBeforeUnmount(()=>{P(),h(D),l(D),p(D),O(),c()}),(b,T)=>b.displayDirective!=="if"||o.unref(g)?o.withDirectives((o.openBlock(),o.createElementBlock("div",{key:0,ref_key:"vfmRootEl",ref:u,class:o.normalizeClass(["vfm vfm--fixed vfm--inset",{"vfm--prevent-none":b.background==="interactive"}]),style:o.normalizeStyle({zIndex:o.unref(V)}),role:"dialog","aria-modal":"true",onKeydown:T[7]||(T[7]=o.withKeys(()=>o.unref(Ze)(),["esc"])),onMouseup:T[8]||(T[8]=o.withModifiers(()=>o.unref(qe)(),["self"])),onMousedown:T[9]||(T[9]=o.withModifiers(C=>o.unref(ie)(C),["self"]))},[o.unref(de)?o.createCommentVNode("",!0):(o.openBlock(),o.createBlock(o.Transition,o.mergeProps({key:0},o.unref(Ge),{appear:""},o.toHandlers(o.unref($))),{default:o.withCtx(()=>[o.unref(A)?(o.openBlock(),o.createElementBlock("div",{key:0,class:o.normalizeClass(["vfm__overlay vfm--overlay vfm--absolute vfm--inset vfm--prevent-none",b.overlayClass]),style:o.normalizeStyle(b.overlayStyle),"aria-hidden":"true"},null,6)):o.createCommentVNode("",!0)]),_:1},16)),o.createVNode(o.Transition,o.mergeProps(o.unref(F),{appear:""},o.toHandlers(o.unref(w))),{default:o.withCtx(()=>[o.withDirectives(o.createElementVNode("div",o.mergeProps({ref_key:"vfmContentEl",ref:f,class:["vfm__content vfm--outline-none",[b.contentClass,{"vfm--prevent-auto":b.background==="interactive"}]],style:b.contentStyle,tabindex:"0"},o.unref(_e),{onMousedown:T[6]||(T[6]=()=>o.unref(ie)())}),[o.renderSlot(b.$slots,"default"),b.showSwipeBanner?(o.openBlock(),o.createElementBlock("div",{key:0,ref_key:"swipeBannerEl",ref:Ke,class:"vfm-swipe-banner-container",onTouchstart:T[2]||(T[2]=C=>o.unref(ce)(C))},[o.renderSlot(b.$slots,"swipe-banner",{},()=>[o.createElementVNode("div",{class:"vfm-swipe-banner-back",onTouchstart:T[0]||(T[0]=C=>b.swipeToClose==="left"&&C.preventDefault())},null,32),o.createElementVNode("div",{class:"vfm-swipe-banner-forward",onTouchstart:T[1]||(T[1]=C=>b.swipeToClose==="right"&&C.preventDefault())},null,32)])],544)):!b.showSwipeBanner&&b.preventNavigationGestures?(o.openBlock(),o.createElementBlock("div",{key:1,class:"vfm-swipe-banner-container",onTouchstart:T[5]||(T[5]=C=>o.unref(ce)(C))},[o.createElementVNode("div",{class:"vfm-swipe-banner-back",onTouchstart:T[3]||(T[3]=C=>b.swipeToClose==="left"&&C.preventDefault())},null,32),o.createElementVNode("div",{class:"vfm-swipe-banner-forward",onTouchstart:T[4]||(T[4]=C=>b.swipeToClose==="right"&&C.preventDefault())},null,32)],32)):o.createCommentVNode("",!0)],16),[[o.vShow,o.unref(v)]])]),_:3},16)],38)),[[o.vShow,b.displayDirective!=="show"||o.unref(g)]]):o.createCommentVNode("",!0)}}),oo="",ne={...j,teleportTo:{type:[String,null,Boolean,Object],default:"body"}},xe=o.defineComponent({inheritAttrs:!1}),te=o.defineComponent({...xe,__name:"VueFinalModal",props:ne,emits:["update:modelValue","beforeOpen","opened","beforeClose","closed","clickOutside"],setup(e,{emit:n}){const s=ae({props:e,modalProps:j,emit:n});return(d,c)=>(o.openBlock(),o.createBlock(o.Teleport,{to:d.teleportTo?d.teleportTo:void 0,disabled:!d.teleportTo},[o.createVNode(oe,o.normalizeProps(o.guardReactiveProps(o.unref(s))),{default:o.withCtx(()=>[o.renderSlot(d.$slots,"default")]),_:3},16)],8,["to","disabled"]))}});function Z(){return o.inject(W)}function Fe(){return o.inject(X)}function le(e,n=te){const{component:t,slots:s,...d}=e,c=typeof s>"u"?{}:Object.fromEntries(Object.entries(s).map(([r,l])=>B.isString(l)?[r,l]:"component"in l?[r,{...l,component:o.markRaw(l.component)}]:[r,o.markRaw(l)]));return{...d,component:o.markRaw(t||n),slots:c}}function Re(e){var l;const n=o.reactive({id:Symbol("useModal"),modelValue:!!(e!=null&&e.defaultModelValue),resolveOpened:()=>{},resolveClosed:()=>{},attrs:{},...le(e)});n.context||(o.getCurrentInstance()?n.context=Z():console.warn("[Vue Final Modal warn] useModal() can only be used inside setup() or functional components."));function t(){return n.modelValue?Promise.resolve("[Vue Final Modal] modal is already opened"):(n.modelValue=!0,new Promise(a=>{n.resolveOpened=()=>a("opened")}))}function s(){return n.modelValue?(n.modelValue=!1,new Promise(a=>{n.resolveClosed=()=>a("closed")})):Promise.resolve("[Vue Final Modal] modal is already closed")}function d(a){const{slots:p,...h}=le(a,n.component);se(n,h),p&&Object.entries(p).forEach(([u,f])=>{const m=n.slots[u];B.isString(m)?n.slots[u]=f:re(m)&&re(f)?se(m,f):n.slots[u]=f})}function c(){if(!n.context)return;const a=n.context.dynamicModals.indexOf(n);a!==-1&&n.context.dynamicModals.splice(a,1)}const r={options:n,open:t,close:s,patchOptions:d,destroy:c};return(l=r.options.context)==null||l.dynamicModals.push(r.options),B.tryOnUnmounted(()=>r.destroy()),r}function Ne(e){return e}function Ae(e,n){return Object.entries(n).forEach(([t,s])=>{e[t]=s}),e}function se(e,n){n.component&&(e.component=n.component),n.attrs&&Ae(e.attrs,n.attrs)}function re(e){return"component"in e||"attrs"in e}function je(e,n){return Object.keys(n).reduce((t,s)=>(t[s]=e[s],t),{})}function He(e){return e?{"onUpdate:modelValue":n=>e("update:modelValue",n),onBeforeClose:()=>e("beforeClose"),onClosed:()=>e("closed"),onBeforeOpen:()=>e("beforeOpen"),onOpened:()=>e("opened"),onClickOutside:()=>e("clickOutside")}:{}}function ae(e){const{props:n,modalProps:t,emit:s}=e,d=o.computed(()=>je(n,t)),c=He(s),r=o.useAttrs();return o.computed(()=>({...d.value,...c,...r}))}const ze=["innerHTML"],Ue=o.defineComponent({__name:"ModalsContainer",setup(e){const n=Z(),t=Fe(),s=Symbol("ModalsContainer"),d=o.computed(()=>{var a;return s===((a=n.modalsContainers.value)==null?void 0:a[0])}),c=o.shallowRef([]);function r(){c.value=n.dynamicModals.filter(a=>a.modelValue)}function l(a){a==null||a(),r()}return o.watch(()=>{var a;return(a=n.dynamicModals)==null?void 0:a.map(p=>p.modelValue)},(a,p)=>{if(!p||a.length!==p.length){r();return}let h=a.length,u=!1;for(;!u&&h--;)a[h]===!0&&p[h]===!1&&(u=!0);u&&r()},{immediate:!0}),n.modalsContainers.value.push(s),o.onBeforeUnmount(()=>{n.modalsContainers.value=n.modalsContainers.value.filter(a=>a!==s)}),(a,p)=>o.unref(d)?(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:0},o.renderList(o.unref(c),(h,u)=>(o.openBlock(),o.createBlock(o.resolveDynamicComponent(h.component),o.mergeProps({key:h.id},h.attrs,{modelValue:h.modelValue,"onUpdate:modelValue":f=>h.modelValue=f,onClosed:()=>l(()=>{var f,m;return(m=(f=o.unref(t)).resolvedClosed)==null?void 0:m.call(f,u)}),onOpened:()=>{var f,m;return(m=(f=o.unref(t)).resolvedOpened)==null?void 0:m.call(f,u)}}),o.createSlots({_:2},[o.renderList(h.slots,(f,m)=>({name:m,fn:o.withCtx(()=>[o.unref(B.isString)(f)?(o.openBlock(),o.createElementBlock("div",{key:0,innerHTML:f},null,8,ze)):"component"in f?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(f.component),o.normalizeProps(o.mergeProps({key:1},f.attrs)),null,16)):(o.openBlock(),o.createBlock(o.resolveDynamicComponent(f),{key:2}))])}))]),1040,["modelValue","onUpdate:modelValue","onClosed","onOpened"]))),128)):o.createCommentVNode("",!0)}});function Ye(){const e=o.shallowReactive([]),n=o.shallowReactive([]),t=o.shallowReactive([]),s=o.shallowReactive([]),d=o.ref([]),c=o.markRaw({install(r){r.provide(W,c),r.config.globalProperties.$vfm=c;const l=$e(c);r.provide(X,l)},modals:e,openedModals:n,openedModalOverlays:t,dynamicModals:s,modalsContainers:d,get(r){return e.find(l=>l.value.modalId&&r===l.value.modalId)},toggle(r,l){const a=c.get(r);return a==null?void 0:a.value.toggle(l)},open(r){return c.toggle(r,!0)},close(r){return c.toggle(r,!1)},closeAll(){return Promise.allSettled([n.map(r=>r.value.toggle(!1))])}});return c}function $e(e){const{modals:n,openedModals:t,openedModalOverlays:s,dynamicModals:d}=e,c={deleteFromModals(r){const l=n.findIndex(a=>a.value===r.value);l!==-1&&n.splice(l,1)},moveToLastOpenedModals(r){c.deleteFromOpenedModals(r),t.push(r)},deleteFromOpenedModals(r){const l=t.findIndex(a=>a.value===r.value);l!==-1&&t.splice(l,1)},moveToLastOpenedModalOverlays(r){c.deleteFromOpenedModalOverlays(r),s.push(r)},deleteFromOpenedModalOverlays(r){const l=s.findIndex(a=>a.value===r.value);l!==-1&&s.splice(l,1)},async openLastOverlay(){var r;if(await o.nextTick(),s.forEach(l=>l.value.overlayVisible.value=!1),s.length>0){const l=s[s.length-1];!((r=l.value.hideOverlay)!=null&&r.value)&&(l.value.overlayVisible.value=!0)}},resolvedClosed(r){var l,a;(a=(l=d[r])==null?void 0:l.resolveClosed)==null||a.call(l)},resolvedOpened(r){var l,a;(a=(l=d[r])==null?void 0:l.resolveOpened)==null||a.call(l)}};return c}M.CoreModal=oe,M.ModalsContainer=Ue,M.VueFinalModal=te,M.coreModalProps=j,M.createVfm=Ye,M.useModal=Re,M.useModalSlot=Ne,M.useVfm=Z,M.useVfmAttrs=ae,M.vueFinalModalProps=ne,Object.defineProperty(M,Symbol.toStringTag,{value:"Module"})});
